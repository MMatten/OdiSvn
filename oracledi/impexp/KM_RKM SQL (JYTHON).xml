<?xml version="1.0" encoding="ISO-8859-1"?>
<SunopsisExport>
<Object class="com.sunopsis.dwg.dbobj.SnpTrt">
		<Field name="ExtVersion" type="java.lang.String"><![CDATA[10.1.3.2.0]]></Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="IndJrnMethod" type="java.lang.String">null</Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IFolder" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IProject" type="com.sunopsis.sql.DbInt"><![CDATA[1000]]></Field>
	<Field name="IState" type="com.sunopsis.sql.DbInt"><![CDATA[15003]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="ITxtTrtTxt" type="com.sunopsis.sql.DbInt"><![CDATA[2442000]]></Field>
	<Field name="KimMultiDserver" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KmDefault" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="KmSrcTechno" type="java.lang.String">null</Field>
	<Field name="KmTechno" type="java.lang.String">null</Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LChecksum" type="com.sunopsis.sql.DbInt"><![CDATA[2431]]></Field>
	<Field name="LCode" type="java.lang.String">null</Field>
	<Field name="OrdFolder" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="TrtName" type="java.lang.String"><![CDATA[RKM SQL (JYTHON)]]></Field>
	<Field name="TrtType" type="java.lang.String"><![CDATA[KR]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2442000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[Author: Sunopsis
Version: 4.0
Last Update : DEC-2004

Description :
- Reverse Knowledge Module (Jython)
- Reverse engineering Knowledge Module to retrieve the tables, views, system tables and columns from any database. 
- This knowledge module works for any ISO database, and may be use for 'non-standard' technologies, such as ODBC for Sage, Rdb, Datacom or any other JDBC or ODBC Driver.
- This KM provides logging (Use Log & Log File Name) options.

To use this knowledge module and  run the reverse engineering:
1. Import this knowledge module in one of your projects.
2. Create a model, and choose the reverse context as well as the knowledge module in the "reverse" tab.
3. Execute the reverse engineering and follow up the steps in the logs

Restrictions:
- The mask of tables to reverse must not be empty, and at least contain the '%' character.
- The tab Selective reverse cannot be used with this knowledge module.]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[1000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpOrigTxt">
		<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[1000]]></Field>
	<Field name="OrigineName" type="java.lang.String"><![CDATA[Editer Commande]]></Field>
	<Field name="SnpsCol" type="java.lang.String"><![CDATA[I_TXT_TRT_TXT]]></Field>
	<Field name="SnpsTable" type="java.lang.String"><![CDATA[SNP_TRT]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[2443000]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[543000]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[10]]></Field>
	<Field name="ShortValue" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[GET_COLUMNS]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Reverse Columns.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[C]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2443000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[Set to Yes to Reverse the columns.]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[2000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpOrigTxt">
		<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[2000]]></Field>
	<Field name="OrigineName" type="java.lang.String"><![CDATA[Aide User Exit]]></Field>
	<Field name="SnpsCol" type="java.lang.String"><![CDATA[I_TXT_UE_HELP]]></Field>
	<Field name="SnpsTable" type="java.lang.String"><![CDATA[SNP_USER_EXIT]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[2444000]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[544000]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[20]]></Field>
	<Field name="ShortValue" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[GET_PRIMARY_KEYS]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Reverse PKs.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[C]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2444000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[Set to Yes to reverse the primary keys.]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[2000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[2445000]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[545000]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[30]]></Field>
	<Field name="ShortValue" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[GET_FOREIGN_KEYS]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Reverse FKs.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[C]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2445000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[Set to Yes to reverse the foreign keys.]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[2000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[2446000]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[546000]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[40]]></Field>
	<Field name="ShortValue" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[USE_LOG]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Use a Log File.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[C]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2446000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[Set to Yes if you want the reverse-engineering process log details in a log file.]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[2000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[2447000]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[547000]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[50]]></Field>
	<Field name="ShortValue" type="java.lang.String"><![CDATA[/temp/reverse.log]]></Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[LOG_FILE_NAME]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Log File Name.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[V]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2447000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[Log File Name.]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[2000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColPlanComp" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String">null</Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2448000]]></Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefPlanComp" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String"><![CDATA[JYTHON]]></Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="KcmAk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmCond" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmErrDel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmJoin" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmNull" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmPk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmDrop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmExtend" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmLock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmPurge" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetInstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetUninstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmTableOrder" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnlock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnsubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmAfterInt" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KxmUsed" type="java.lang.String">null</Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[4]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[71]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Start the Reverse]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2448000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[src     = [ 
	'<%=snpRef.getInfo("SRC_JAVA_DRIVER")%>', 
	'<%=snpRef.getInfo("SRC_JAVA_URL")%>', 
	'<%=snpRef.getInfo("SRC_USER_NAME")%>', 
	'<%=snpRef.getInfo("SRC_PASS")%>', 
	'<%=snpRef.getInfo("SRC_CATALOG")%>', 
	'<%=snpRef.getInfo("SRC_SCHEMA")%>' 
	] 
repo     = [ 
	'<%=snpRef.getInfo("DEST_JAVA_DRIVER")%>', 
	'<%=snpRef.getInfo("DEST_JAVA_URL")%>', 
	'<%=snpRef.getInfo("DEST_USER_NAME")%>', 
	'<%=snpRef.getInfo("DEST_PASS")%>', 
	'', 
	'' 
	] 
imod    =  <%=snpRef.getModel("ID")%> 
tabpat  = [ 
	'<%=snpRef.getModel("REV_OBJ_PATT")%>',  
	'<%=snpRef.getModel("REV_OBJ_TYPE")%>',  
	'<%=snpRef.getModel("REV_ALIAS_LTRIM")%>' 
	] 
cols 	= <%=snpRef.getOption("GET_COLUMNS")%> 
pks 	= <%=snpRef.getOption("GET_PRIMARY_KEYS")%> 
fks 	= <%=snpRef.getOption("GET_FOREIGN_KEYS")%> 
logfile	= r'<%=snpRef.getOption("LOG_FILE_NAME")%>' 
uselog	= <%=snpRef.getOption("USE_LOG")%> 
 
# 
# START THE REVERSE 
# 
rev     = SnpsReverse(imod, tabpat, src, repo, uselog, logfile) 
rev.startReverse(getcolumns=cols, getkeys=pks, getfks=fks) 
rev.endReverse() 
]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[3000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpOrigTxt">
		<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[3000]]></Field>
	<Field name="OrigineName" type="java.lang.String"><![CDATA[Techno Destination]]></Field>
	<Field name="SnpsCol" type="java.lang.String"><![CDATA[DEF_I_TXT]]></Field>
	<Field name="SnpsTable" type="java.lang.String"><![CDATA[SNP_LINE_TRT]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColPlanComp" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String">null</Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2449000]]></Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefPlanComp" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String"><![CDATA[SUNOPSIS_API]]></Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="KcmAk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmCond" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmErrDel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmJoin" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmNull" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmPk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmDrop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmExtend" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmLock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmPurge" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetInstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetUninstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmTableOrder" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnlock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnsubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmAfterInt" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KxmUsed" type="java.lang.String">null</Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[81]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Get MetaData]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2449000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[SnpsReverseSetMetaData -MODEL=<%=snpRef.getModel("ID")%>]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[3000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColPlanComp" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String">null</Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2450000]]></Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefPlanComp" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String"><![CDATA[JYTHON]]></Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="KcmAk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmCond" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmErrDel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmJoin" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmNull" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmPk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmDrop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmExtend" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmLock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmPurge" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetInstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetUninstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmTableOrder" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnlock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnsubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmAfterInt" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KxmUsed" type="java.lang.String">null</Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[5]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[51]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Create Jython Classes]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2450000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[import java.sql as sql
import java.lang as lang
import time

class Log:
	"""Creates a log file and traces information
	"""
	def __init__(self, logfilename, uselog=1, append=0, printtoscreen=0):
		self.logfilename = logfilename
		self.printtoscreen = printtoscreen
		self.uselog=uselog
		if self.uselog:
			if not append: # Reset the file
				f = open(logfilename, "w")
				f.close()

	def record(self, rec):
		if self.uselog:
			t = time.localtime()
			l = '%d-%02d-%02d %02d:%02d:%02d - %s' % (t[0], t[1], t[2], t[3], t[4], t[5], rec)
			f = open(self.logfilename, "a+")
			print >> f, l
			f.close()
			if self.printtoscreen:
				print l

class SnpsReverse:
	def __init__(self, iMod, tabPattern, srcConnect, repoConnect, useLog, logFileName):
		"""
		Constructor:
			iMod:        I_MODEL value for the current Model to be reversed
			tabPattern:  Table pattern info [Filter, TableType, AliasRemoveChars]
			srcConnect:  Source connection information:
				           [Driver, Url, User, Pass, Catalog, Schema]
			repoConnect: Repository connection Information:
					       [Driver, Url, User, Pass, Catalog, UnusedSchema]

		Example:
			src     = ['com.ibm.db2.jcc.DB2Driver', 'jdbc:db2://hydra2u:50000/DB_SNPS', 'db2admin', 'sunopsis', '', 'TRG_DEMO']
			repo    = ['com.ibm.db2.jcc.DB2Driver', 'jdbc:db2://hydra2u:50000/DB_SNPS', 'FX_W_0_1_323', 'FX_W_0_1_323', '', '']
			imod    = 5111
			tabpat  = ['%', 'T', 'TRG_']
			logfile = '/temp/reverse.log'
			rev     = SnpsReverse(imod, tabpat, src, repo, 1, logfile)
			rev.startReverse(getcolumns=1, getkeys=1, getfks=1)
			rev.endReverse()
		"""
		self.logger = Log(logfilename=logFileName, uselog=useLog, printtoscreen=1)
		self.logger.record('Reverse Started.')
		self.iMod = iMod

		# Connect to the source database:
		self.srcdriver = srcConnect[0]
		self.srcurl    = srcConnect[1]
		self.srcuser   = srcConnect[2]
		self.srcpass   = srcConnect[3]
		self.srccatalog= srcConnect[4]
		if self.srccatalog=='' : self.srccatalog=None
		self.srcschema = srcConnect[5]
		if self.srcschema == '' : self.srcschema=None

		# Modify url definition for MSSQL specfifc behavior
		if self.srcdriver=='com.inet.tds.TdsDriver':
			self.srcurl = self.srcurl + '?database=' + self.srccatalog
			self.srccatalog = None
		lang.Class.forName(self.srcdriver)
		self.logger.record('Connecting to source url %s' % self.srcurl)
		self.srcCx = sql.DriverManager.getConnection(self.srcurl, self.srcuser, self.srcpass)
		self.logger.record('Connected.')
		try:
			self.srcCx.setAutoCommit(1)
		except:
			self.srcCx.setAutoCommit(0)

		# Connect to the Repostory database:
		self.repodriver = repoConnect[0]
		self.repourl    = repoConnect[1]
		self.repouser   = repoConnect[2]
		self.repopass   = repoConnect[3]
		self.repocatalog= repoConnect[4]
		if self.repocatalog=='' : repocatalog=None
		self.reposchema = repoConnect[5]
		if self.reposchema=='' : reposchema=None
		lang.Class.forName(self.repodriver)
		self.logger.record('Connecting to Repositor url %s' % self.repourl)
		self.repoCx = sql.DriverManager.getConnection(self.repourl, self.repouser, self.repopass)
		self.logger.record('Connected.')
		try:
			self.repoCx.setAutoCommit(1)
		except:
			self.repoCx.setAutoCommit(0)
		# Table Pattern information:
		self.srctabfilter = tabPattern[0]
		self.tabtype = tabPattern[1]
		self.aliasremovechars = tabPattern[2]
		self.jdbctabtype = self.__gettabletype(self.tabtype)
		self.logger.record('Reverse Options: Model %d - Filter %s - Table Types %s (%s)' % (self.iMod, self.srctabfilter, self.tabtype, self.jdbctabtype))
		##
		# intialize source metadata
		##
		self.metadata = self.srcCx.getMetaData()
		self.logger.record('Driver Name: %s' % self.metadata.getDriverName())
		self.logger.record('Driver Version: %s' % self.metadata.getDriverVersion())

	def startReverse(self, getcolumns=1, getkeys=1, getfks=1):
		"""
		Public method to start a reverse
		set getcolumns, getkeys and getfks flags according to
		what you want to reverse
		"""
		self.__gettables(getcolumns=getcolumns, getkeys=getkeys, getfks=getfks)
		
	def endReverse(self):
		"""
		Public Method that should be called to release all opened connections
		"""
		self.__del__()
		

	def __gettables(self, getcolumns=1, getkeys=1, getfks=1):
		"""
		private gettables():
		Starts the Reverse of the Tables
		retrieves columns, keys and fks according to the flags sent as parameters
		"""
		self.logger.record('*** Getting tables List **')
		tlst = self.metadata.getTables(self.srccatalog, self.srcschema, self.srctabfilter,self.jdbctabtype)
		sql = 'insert into SNP_REV_TABLE (I_MOD,TABLE_NAME,RES_NAME,TABLE_ALIAS,TABLE_DESC,IND_SHOW,TABLE_TYPE) values (?,?,?,?,?,?,?)'
		ps = self.repoCx.prepareStatement(sql) 
		while tlst.next():
			try: table_cat = tlst.getString('TABLE_CAT')
			except: table_cat = ''
			try: table_schem = tlst.getString('TABLE_SCHEM')
			except: table_schem = ''
			try: table_name = tlst.getString('TABLE_NAME')
			except: table_name = ''
			try: remarks = tlst.getString('REMARKS')[250]
			except: remarks = ''
			if self.aliasremovechars: table_alias = table_name.replace(self.aliasremovechars, '')[0:3]
			else: table_alias = table_name[0:3]
 
			self.logger.record('Table: %d,%s,%s,%s,%s,%s,%s' % (self.iMod, table_name, table_name, table_alias, remarks, '1', self.tabtype))
			ps.clearParameters()
			ps.setInt(1,self.iMod)
			ps.setString(2,table_name)
			ps.setString(3,table_name)
			ps.setString(4,table_alias)
			ps.setString(5,remarks)
			ps.setString(6,'1')
			ps.setString(7,self.tabtype)
			ps.executeUpdate()
			#
			# Get the columns
			#
			if getcolumns:
				self.__getcolumns(table_name)
			if getkeys:
				self.__getkeys(table_name)
			if getfks:
				self.__getfks(table_name)

		ps.close()
		tlst.close()
		self.repoCx.commit()


	def __getcolumns(self, tablename):
		"""
		private getcolumns:
		retrieves columns definition of a specified table
		"""
		self.logger.record('  *** Getting Columns for table: %s**' % tablename)
		clst = self.metadata.getColumns(self.srccatalog, self.srcschema, tablename, '%')
		sql = 'insert into SNP_REV_COL (I_MOD,TABLE_NAME,COL_NAME,COL_HEADING,COL_DESC,DT_DRIVER,POS,LONGC,SCALEC,BYTES,COL_MANDATORY,CHECK_FLOW,CHECK_STAT) values (?,?,?,?,?,?,?,?,?,?,?,?,?)'
		ps = self.repoCx.prepareStatement(sql)

		while clst.next():
			colpos      = 0
			coltable    = clst.getString("TABLE_NAME")
			colname     = clst.getString("COLUMN_NAME")
			# coldt     = clst.getString("DATA_TYPE")
			coltypename = clst.getString("TYPE_NAME")
			colsize     = clst.getString("COLUMN_SIZE")
			try:    colsize = int(colsize)
			except: colsize = None
			coldec      = clst.getInt("DECIMAL_DIGITS")
			self.logger.record(coldec)
			colnull     = clst.getString("NULLABLE")
			try:    colnull = int(colnull)
			except: colnull = clst.columnNullableUnknown
			try:    colremark = clst.getString("REMARKS")
			except: self.logger.record('  ---> REMARKS not suported by the driver')
			colheading   = colname 
			if colremark: colheading = colremark[0:35]
			try:    collen  = clst.getInt("CHAR_OCTET_LENGTH")
			except: self.logger.record('  ---> CHAR_OCTET_LENGTH not suported by the driver')
			try:
				colpos = clst.getInt("ORDINAL_POSITION")
			except:
				self.logger.record('  ---> ORDINAL_POSITION not suported by the driver. AutoNumbering.')
				colpos += 1
				colPos=colPos+1
			try:
				colisnull = clst.getString("IS_NULLABLE") 
				if colisnull=='NO': colisnull='1' 
				else:               colisnull='0'
			except: 
				self.logger.record('  ---> IS_NULLABLE not suported by the driver. Column set to nullable.') 
				colisnull='0'
			 
			self.logger.record('   Column: %s, %s, %d, %d, %d, %d, %d, %s' % (colname, coltypename, colpos, colsize, coldec, collen, colnull, colisnull)) 
			# 
			# Apply updates to the DB 
			# 
			ps.clearParameters()
			ps.setInt(1, self.iMod)
			ps.setString(2,coltable)
			ps.setString(3,colname)
			ps.setString(4,colheading)
			ps.setString(5,colremark)
			ps.setString(6,coltypename)
			ps.setInt(7,colpos)
			ps.setInt(8,colsize)
			ps.setInt(9,coldec)
			ps.setInt(10,colsize)
			ps.setString(11,colisnull)
			ps.setString(12,'1')
			ps.setString(13,'1')
			ps.executeUpdate()
		clst.close()
		ps.close()

	def __getkeys(self, tablename):
		"""
		private getkeys:
		retrieves PK definition of a specified table
		"""
		self.logger.record('  *** Getting Keys for table: %s**' % tablename)
		klst = self.metadata.getPrimaryKeys(self.srccatalog, self.srcschema, tablename)
		
		sqlpk = "insert into SNP_REV_KEY (I_MOD,TABLE_NAME,KEY_NAME,CONS_TYPE,IND_ACTIVE,CHECK_FLOW,CHECK_STAT) values (?,?,?,'PK','1','1','1')"
		sqlpkc = "insert into SNP_REV_KEY_COL (I_MOD,TABLE_NAME,KEY_NAME,COL_NAME,POS) values (?,?,?,?,?)"

		pspk = self.repoCx.prepareStatement(sqlpk)
		pspkc = self.repoCx.prepareStatement(sqlpkc)

		pkname=''
		while klst.next():
			previouspkname=pkname
			tablename = klst.getString("TABLE_NAME")
			colname   = klst.getString("COLUMN_NAME")
			keyseq    = klst.getShort("KEY_SEQ")
			pkname    = klst.getString("PK_NAME")
			if not (pkname): pkname='PK_%s' % tablename

			# If a new PK was detected
			if pkname<>previouspkname:
				pspk.clearParameters()
				self.logger.record('  Primary Key: %s' %  pkname)
				pspk.setInt(1,self.iMod)
				pspk.setString(2,tablename)
				pspk.setString(3,pkname)
				pspk.executeUpdate()
			self.logger.record('     Primary Column: %d, %s' %  (keyseq, colname))
			pspkc.clearParameters()
			pspkc.setInt(1, self.iMod)
			pspkc.setString(2,tablename)
			pspkc.setString(3,pkname)
			pspkc.setString(4,colname)
			pspkc.setShort(5,keyseq)
			pspkc.executeUpdate()
		pspk.close()
		pspkc.close()
		klst.close()

	def __getfks(self, tablename):
		"""
		private getfks:
		retrieves FKs definition of a specified table (Imported Keys)
		"""
		self.logger.record('  *** Getting Foreign Keys for table: %s**' % tablename)
		klst = self.metadata.getImportedKeys(self.srccatalog, self.srcschema, tablename)
		
		sqlfk = "insert into SNP_REV_JOIN (I_MOD,FK_NAME,TABLE_NAME,FK_TYPE,PK_CATALOG,PK_SCHEMA,PK_TABLE_NAME,CHECK_STAT,CHECK_FLOW,IND_ACTIVE) values (?,?,?,?,?,?,?,'1','1','1')"
		sqlfkc = "insert into SNP_REV_JOIN_COL (I_MOD,FK_NAME,FK_COL_NAME,FK_TABLE_NAME,PK_COL_NAME,PK_TABLE_NAME,POS) values (?,?,?,?,?,?,?)"

		psfk = self.repoCx.prepareStatement(sqlfk)
		psfkc = self.repoCx.prepareStatement(sqlfkc)

		fkname=''
		while klst.next():
			previousfkname = fkname
			try: fkname = klst.getString("FK_NAME")
			except: fkname = ''
			try: pktablecat = klst.getString("PKTABLE_CAT")
			except: pktablecat = ''
			try: pktableschem = klst.getString("PKTABLE_SCHEM")
			except: pktableschem = ''
			try: pktablename = klst.getString("PKTABLE_NAME")
			except: pktablename = ''
			try: pkcolumnname = klst.getString("PKCOLUMN_NAME")
			except: pkcolumnname = ''
			try: fktablecat = klst.getString("FKTABLE_CAT")
			except: fktablecat = ''
			try: fktableschem = klst.getString("FKTABLE_SCHEM")
			except: fktableschem = ''
			try: fktablename = klst.getString("FKTABLE_NAME")
			except: fktablename = ''
			try: fkcolumnname = klst.getString("FKCOLUMN_NAME")
			except: fkcolumnname = ''
			try : keyseq = klst.getShort("KEY_SEQ")
			except: keyseq = ''
			if fkname <> previousfkname:
				psfk.clearParameters()
				self.logger.record('  Foreign Key: %s references (%s, %s, %s)' %  (fkname, pktablecat, pktableschem, pktablename))
				psfk.setInt(1, self.iMod)
				psfk.setString(2,fkname)
				psfk.setString(3,fktablename)
				psfk.setString(4,'D')
				psfk.setString(5,pktablecat)
				psfk.setString(6,pktableschem)
				psfk.setString(7,pktablename)
				psfk.executeUpdate()
			
			self.logger.record('     Foreign Key Columns: %d, %s=%s' %  (keyseq, fkcolumnname, pkcolumnname))
			psfkc.setInt(1, self.iMod)
			psfkc.setString(2,fkname)
			psfkc.setString(3,fkcolumnname)
			psfkc.setString(4,fktablename)
			psfkc.setString(5,pkcolumnname)
			psfkc.setString(6,pktablename)
			psfkc.setShort(7,keyseq)
			psfkc.executeUpdate()
		psfk.close()
		psfkc.close()
		klst.close()

	def __gettabletype(self, snpstype):
		"""
		private gettabletype:
		Returns the JDBC table Type according to the Sunopsis TYpe
		"""
		tabletype=None
		if snpstype=='T': tabletype ='TABLE'
		elif snpstype=='V': tabletype ='VIEW'
		elif snpstype=='ST': tabletype ='SYSTEM TABLE'
		elif snpstype=='AT': tabletype ='ALIAS'
		elif snpstype=='SY': tabletype ='SYNONYM'
		else: tabletype='TABLE'
		return [tabletype]

	def __del__(self):
		"""
		Finalizer: Close all opened connections
		"""
		self.logger.record('Disconnecting from Source.')
		if not self.srcCx.isClosed():
			self.srcCx.close()
		self.logger.record('Disconnecting from Repository')
		if not self.repoCx.isClosed():
			self.repoCx.close()
		self.logger.record('Reverse End.')]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[3000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColPlanComp" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String">null</Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2451000]]></Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefPlanComp" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String"><![CDATA[SUNOPSIS_API]]></Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[103000]]></Field>
	<Field name="KcmAk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmCond" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmErrDel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmJoin" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmNull" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KcmPk" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmDrop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmExtend" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmLock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmPurge" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetInstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSetUninstall" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmSubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmTableOrder" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnlock" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmUnsubscribe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmAfterInt" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KxmUsed" type="java.lang.String">null</Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[4]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Reset MetaData]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxt">
		<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[2451000]]></Field>
	<Field name="TxtOrd" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[SnpsReverseResetTable -MODEL=<%=snpRef.getModel("ID")%>]]></Field>
	<Field name="LangName" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[3000]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IndChange" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2006-12-19 18:02:31.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.DwgExportSummary">
		<Field name="ExpTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="InstObjNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="JoinColNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="JoinNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="KeyColNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="KeyNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="LinkDiagNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="MorigTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="MtxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OrigTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[3]]></Field>
	<Field name="OtherObjectsNb" type="com.sunopsis.sql.DbInt"><![CDATA[10]]></Field>
	<Field name="PlanAgentNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="StepNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="TxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[10]]></Field>
	<Field name="UeOrigNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="UeUsedNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="VarPlanAgentNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
</Object>
</SunopsisExport>
